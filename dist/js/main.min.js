"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(){var a=function(){var a=function(){document.documentElement.style.setProperty("--vw",.01*document.body.clientWidth+"px"),document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px"),document.body.style.height=window.innerHeight+"px"};setTimeout(a,20),window.addEventListener("resize",a)},b=function(){var a,b,c=document.querySelector(".sketch-container"),d=document.querySelector(".controls"),e=d.querySelector(".settings"),f=e.querySelector(".settings-toggle"),g=d.querySelector(".add-weft-btn"),h=[].slice.call(d.querySelectorAll(".setting-wefts .remove-btn")),i=d.querySelector(".add-warp-btn"),j=[].slice.call(d.querySelectorAll(".setting-warps .remove-btn")),k=d.querySelector("#seed"),l=d.querySelector("#generate"),m=d.querySelector("#download"),n=function(){a=p(),b=new p5(x,c)},o=function(a){a.preventDefault(),b&&b.remove(),n()},p=function(){0<k.value.length&&q(k.value);var a=parseFloat(document.querySelector("#thread-width").value),b=parseFloat(document.querySelector("#thread-spacing").value),c=parseInt(document.querySelector("#pattern-width").value),e=[].slice.call(d.querySelectorAll(".setting-wefts .repeater-elements input[type=\"color\"]")).map(function(a){return a.value}),f=[].slice.call(d.querySelectorAll(".setting-warps .repeater-elements .repeater-single")).map(function(a){return{color:a.querySelector("input[type=\"color\"]").value,pattern:a.querySelector("input[type=\"text\"]").value.replace(/[^01]/g,"").split("")}});return{threadWidth:a,threadSpacing:b,threadTotal:a+b,patternWidth:c,weftColors:e,warpSettings:f}},q=function(a){var b=document.querySelector("#thread-width"),c=document.querySelector("#thread-spacing"),d=document.querySelector("#pattern-width");document.querySelector(".setting-wefts .repeater-elements").innerHTML="",document.querySelector(".setting-warps .repeater-elements").innerHTML="";var e=C(a),f=parseInt(B(e(),1,50)),g=parseInt(B(e(),1,50)),h=parseInt(B(e(),1,50)),j=D(e);console.log(j),b.value=h,c.value=parseInt(B(e(),0,.5*h)),d.value=parseInt(B(e(),1,999));for(var k,l=0;l<f;l++)k=j[parseInt(B(e(),0,j.length-1))],r(k);for(var m=0;m<g;m++){for(var o=j[parseInt(B(e(),0,j.length-1))],p=parseInt(B(e(),4,200)),q="",s=0;s<p;s++)q+=.5>e()?"0":"1";t(o,q)}},r=function(a){var b=d.querySelector(".setting-wefts .repeater-elements"),c=d.querySelector(".setting-wefts .repeater-template"),e=c.cloneNode(!0),f=e.querySelector(".remove-btn");e.classList.remove("repeater-template"),b.appendChild(e),f.addEventListener("click",s),null!==a&&(e.querySelector("input[type=\"color\"]").value=a)},s=function b(a){var c=a.target.closest(".repeater-single");a.target.removeEventListener("click",b),c.parentElement.removeChild(c)},t=function(a,b){var c=d.querySelector(".setting-warps .repeater-elements"),e=d.querySelector(".setting-warps .repeater-template"),f=e.cloneNode(!0),g=f.querySelector(".remove-btn");f.classList.remove("repeater-template"),c.appendChild(f),g.addEventListener("click",u),null!==a&&(f.querySelector("input[type=\"color\"]").value=a),null!==b&&(f.querySelector("input[type=\"text\"]").value=b)},u=function b(a){var c=a.target.closest(".repeater-single");a.target.removeEventListener("click",b),c.parentElement.removeChild(c)},v=function(){var a=new Date,c="loom_"+a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+"-"+a.getMinutes()+"-"+a.getSeconds();b.save(c+".jpg")},w=function(){e.classList.toggle("show-settings")},x=function(b){var d,e=[],f=[],g=.5*a.threadWidth,h=0,i=0;b.setup=function(){b.createCanvas(c.clientWidth,c.clientHeight),d=l();for(var h=0;h<d;h++)e.push(new k({x:h*a.threadTotal+g,color:a.weftColors[h%a.weftColors.length],gap:a.threadSpacing,step:a.threadTotal,width:a.threadWidth}));for(var i=0;i<a.warpSettings.length;i++)f.push(new j({color:a.warpSettings[i].color,gap:a.threadSpacing,step:a.threadTotal,width:a.threadWidth,numWefts:d,pattern:a.warpSettings[i].pattern}));b.background(255)},b.draw=function(){if(h*a.threadTotal>b.height)return b.noLoop();for(var c,g=f[i],j=0;j<d;j++)c=g.weave(j,h),"under"==c&&e[j].weave(h);i=z(i+1,0,a.warpSettings.length-1),h++};var j=function(){function a(b){_classCallCheck(this,a),this.args=b,this.counter=0}return _createClass(a,[{key:"weave",value:function(a,c){if(this.counter=z(this.counter+1,0,this.args.pattern.length-1),0==this.args.pattern[this.counter])return"under";var d=a*this.args.step-this.args.gap,e=(a+1)*this.args.step,f=c*this.args.step+.5*this.args.width;return b.strokeCap(b.SQUARE),b.strokeWeight(this.args.width),b.stroke(this.args.color),b.line(d,f,e,f),"over"}}]),a}(),k=function(){function a(b){_classCallCheck(this,a),this.args=b}return _createClass(a,[{key:"weave",value:function(a){var c=a*this.args.step-this.args.gap,d=(a+1)*this.args.step+this.args.gap;b.strokeCap(b.SQUARE),b.strokeWeight(this.args.width),b.stroke(this.args.color),b.line(this.args.x,c,this.args.x,d)}}]),a}(),l=function(){var c=Math.floor(b.width/a.threadTotal),d=Math.ceil(c/a.patternWidth)*a.patternWidth+Math.floor(.5*a.patternWidth);return d}},z=function(a,b,c){return a>=b&&a<=c?a:a>c?b:c},A=function(a,b,c){return Math.min(Math.max(a,b),c)},B=function(a,b,c){return b+(c-b)*A(a,0,1)},C=function(a){for(var b=0,c=1779033703^a.length;b<a.length;b++)c=Math.imul(c^a.charCodeAt(b),3432918353),c=c<<13|c>>>19;return function(){return c=Math.imul(c^c>>>16,2246822507),c=Math.imul(c^c>>>13,3266489909),c=(c^=c>>>16)>>>0,c/Math.pow(10,c.toString().length)}},D=function(a){var b=parseInt(B(a(),0,359)),c=["mono","contrast","triade","tetrade","analogic"],d=["default","pastel","soft","light","hard","pale"],e=c[parseInt(B(a(),0,c.length-1))],f=d[parseInt(B(a(),0,d.length-1))],g=new ColorScheme;g.from_hue(b).scheme(e),-1<["triade","tetrade","analogic"].indexOf(e)&&g.distance(B(a(),.25,.5));var h=g.variation(f).colors();return h.map(function(a){return"#"+a})};(function(){f.addEventListener("click",w),g.addEventListener("click",r),h.forEach(function(a){return a.addEventListener("click",s)}),i.addEventListener("click",t),j.forEach(function(a){return a.addEventListener("click",u)}),l.addEventListener("click",o),m.addEventListener("click",v),d.addEventListener("submit",o)})(),n()},c=function a(){var a="**********\n\nThis website was built by Matthias Planitzer.\nwww.matthias-planitzer.de\n\n**********";console.log("%c"+a,"color: #00F; font-family: Helvetica Neue\", Helvetica, sans-serif; font-size: 14px;")};(function(){a(),b(),c()})()})();
//# sourceMappingURL=main.min.js.map
