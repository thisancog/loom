{"version":3,"sources":["main.js"],"names":["resizeBody","changeHeight","document","window","setTimeout","loom","sketchContainer","controls","settings","settingsToggle","addWeftBtn","querySelector","removeWeftBtns","addWarpBtn","removeWarpBtns","seedInput","slice","generateBtn","luckyBtn","downloadBtn","addEventListener","args","parseArgs","p5Sketch","e","initLoom","generateFromString","threadWidth","parseFloat","threadSpacing","patternWidth","parseInt","weftColors","input","value","warps","pattern","color","row","warpSettings","threadTotal","threadWidthInput","threadSpacingInput","getRandomNumber","numWefts","lerp","colors","xmur3","i","numWarps","newColor","addWeft","generateRandomColorSet","patternLength","patternPerlin","perlin1D","newPattern","addWarp","perlinWavelength","Math","n","weftsInner","template","newElem","removeWeft","removeBtn","parentElement","warpsInner","appendChild","removeWarp","target","save","saveFrame","now","luckyMode","padThis","seedLength","fileName","seedString","chars","sketch","wefts","currentY","resetLoom","currentWarpIndex","step","offsetX","gap","getNumWefts","width","x","p","background","y","draw","currentWarp","underOrOver","counter","wrapIndex","startX","currentX","endX","Weft","startY","maxWidth","endY","minWidth","limit","h","min","max","seed","wavelength","C","Z","floor","randomNum","a","A","interpolate","b","px","f","pa","variation","hue","map","schemes","variations","scheme","PRNG","registerEvents","colorSet","console","btn","forEach","credits","init"],"mappings":"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","file":"main.min.js","sourcesContent":["\"use strict\";\n\n(function() {\n\n\t/***************************************\n\t\tCommon methods\n\t***************************************/\n\n\tvar vpWidth = function() { return Math.max(document.documentElement.clientWidth, window.innerWidth || 0); }\n\tvar vpHeight = function() { return Math.max(document.documentElement.clientHeight, window.innerHeight || 0); }\n\n\t\n\tvar init = function() {\n\t\tresizeBody();\n\t\tloom();\n\t\tcredits();\n\t}\n\n\n\n\t/***************************************\n\t\tResize body\n\t***************************************/\n\n\tvar resizeBody = function() {\n\t\tvar changeHeight = function() {\n\t\t\tdocument.documentElement.style.setProperty('--vw', (0.01 * document.body.clientWidth) + 'px');\n\t\t\tdocument.documentElement.style.setProperty('--vh', (0.01 * window.innerHeight) + 'px');\n\t\t\tdocument.body.style.height = window.innerHeight + 'px';\n\t\t}\n\n\t\tsetTimeout(changeHeight, 20); // older Safari iOS will lag\n\t\twindow.addEventListener('resize', changeHeight);\n\t}\n\n\n\n\n\n\t/***************************************\n\t\tLoom\n\t***************************************/\n\n\tvar loom = function() {\n\t\tvar sketchContainer = document.querySelector('.sketch-container'),\n\t\t\tcontrols        = document.querySelector('.controls'),\n\t\t\tsettings        = controls.querySelector('.settings'),\n\t\t\tsettingsToggle  = settings.querySelector('.settings-toggle'),\n\t\t\taddWeftBtn      = controls.querySelector('.add-weft-btn'),\n\t\t\tremoveWeftBtns  = [].slice.call(controls.querySelectorAll('.setting-wefts .remove-btn')),\n\t\t\taddWarpBtn      = controls.querySelector('.add-warp-btn'),\n\t\t\tremoveWarpBtns  = [].slice.call(controls.querySelectorAll('.setting-warps .remove-btn')),\n\t\t\tseedInput       = controls.querySelector('#seed'),\n\t\t\tgenerateBtn     = controls.querySelector('#generate'),\n\t\t\tluckyBtn        = controls.querySelector('#lucky'),\n\t\t\tdownloadBtn     = controls.querySelector('#download'),\n\t\t\targs, p5Sketch;\n\n\t\tvar registerEvents = function() {\n\t\t\tsettingsToggle.addEventListener('click', toggleSettings);\n\t\t\taddWeftBtn.addEventListener(    'click', addWeft);\n\t\t\tremoveWeftBtns.forEach(btn =>\n\t\t\t\tbtn.addEventListener(       'click', removeWeft)\n\t\t\t);\n\t\t\taddWarpBtn.addEventListener(    'click', addWarp);\n\t\t\tremoveWarpBtns.forEach(btn =>\n\t\t\t\tbtn.addEventListener(       'click', removeWarp)\n\t\t\t);\n\n\t\t\tgenerateBtn.addEventListener(   'click', resetLoom);\n\t\t\tluckyBtn.addEventListener(      'click', luckyMode);\n\t\t\tdownloadBtn.addEventListener(   'click', saveFrame);\n\t\t\tcontrols.addEventListener(     'submit', resetLoom);\n\t\t}\n\n\t\tvar initLoom = function() {\n\t\t\targs            = parseArgs();\n\t\t\tp5Sketch        = new p5(sketch, sketchContainer);\n\t\t}\n\n\t\tvar resetLoom = function(e) {\n\t\t\tif (e)\t\t\te.preventDefault();\n\t\t\tif (p5Sketch)\tp5Sketch.remove();\n\n\t\t\tinitLoom();\n\t\t}\n\n\t\tvar parseArgs = function() {\n\t\t\tif (seedInput.value.length > 0)\n\t\t\t\tgenerateFromString(seedInput.value);\n\n\t\t\tlet threadWidth   = parseFloat(document.querySelector('#thread-width').value),\n\t\t\t\tthreadSpacing = parseFloat(document.querySelector('#thread-spacing').value),\n\t\t\t\tpatternWidth  = parseInt(document.querySelector('#pattern-width').value);\n\n\t\t\tlet weftColors    = [].slice.call(controls.querySelectorAll('.setting-wefts .repeater-elements input[type=\"color\"]'))\n\t\t\t\t\t\t\t\t  .map(input => input.value);\n\n\t\t\tlet warps         = [].slice.call(controls.querySelectorAll('.setting-warps .repeater-elements .repeater-single'))\n\t\t\t\t\t\t\t\t  .map(function(row) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tcolor:   row.querySelector('input[type=\"color\"]').value,\n\t\t\t\t\t\t\t\t\t\t\tpattern: row.querySelector('input[type=\"text\"]').value\n\t\t\t\t\t\t\t\t\t\t\t\t\t    .replace(/[^01]/g, '')\n\t\t\t\t\t\t\t\t\t\t\t\t\t    .split(''),\n\t\t\t\t\t\t\t\t  \t\t}\n\t\t\t\t\t\t\t\t  });\n\n\t\t\treturn {\n\t\t\t\tthreadWidth: \tthreadWidth,\n\t\t\t\tthreadSpacing:\tthreadSpacing,\n\t\t\t\tthreadTotal:    threadWidth + threadSpacing,\n\t\t\t\tpatternWidth:\tpatternWidth,\n\t\t\t\tweftColors: \tweftColors,\n\t\t\t\twarpSettings:   warps \n\t\t\t};\n\t\t}\n\n\t\tvar generateFromString = function(seed) {\n\t\t\tlet threadWidthInput   = document.querySelector('#thread-width'),\n\t\t\t\tthreadSpacingInput = document.querySelector('#thread-spacing'),\n\t\t\t\tpatternWidth       = document.querySelector('#pattern-width');\n\n\t\t\t//\tclear everything\n\t\t\tdocument.querySelector('.setting-wefts .repeater-elements').innerHTML = '';\n\t\t\tdocument.querySelector('.setting-warps .repeater-elements').innerHTML = '';\n\n\n\t\t\tlet getRandomNumber = xmur3(seed),\n\t\t\t\tnumWefts        = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tnumWarps        = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tthreadWidth     = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tcolors          = generateRandomColorSet(getRandomNumber);\n\n\t\t\tthreadWidthInput.value   = threadWidth;\n\t\t\tthreadSpacingInput.value = parseInt(lerp(getRandomNumber(), 0, 0.5 * threadWidth));\n\t\t\tpatternWidth.value       = parseInt(lerp(getRandomNumber(), 3 * numWefts, 10 * numWefts));\n\n\t\t\tfor (let i = 0; i < numWefts; i++) {\n\t\t\t\tlet newColor = colors[parseInt(lerp(getRandomNumber(), 0, colors.length - 1))];\n\t\t\t\taddWeft(newColor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < numWarps; i++) {\n\t\t\t\tlet newColor         = colors[parseInt(lerp(getRandomNumber(), 0, colors.length - 1))],\n\t\t\t\t\tpatternLength    = parseInt(lerp(getRandomNumber(), 4, 200)),\n\t\t\t\t\tperlinWavelength = Math.floor(threadWidth * lerp(getRandomNumber(), 0.1, 0.5)),\n\t\t\t\t\tpatternPerlin    = perlin1D(getRandomNumber(), perlinWavelength),\n\t\t\t\t\tnewPattern       = '';\n\n\t\t\t\tfor (let n = 0; n < patternLength; n++) {\n\t\t\t\t\tnewPattern = newPattern + (patternPerlin() < 0.5 ? '0' : '1');\n\t\t\t\t}\n\n\t\t\t\taddWarp(newColor, newPattern);\n\t\t\t}\n\t\t}\n\n\n\n\t\t/***************************************\n\t\t\tInterface\n\t\t***************************************/\n\n\t\tvar addWeft = function(color) {\n\t\t\tlet weftsInner = controls.querySelector('.setting-wefts .repeater-elements'),\n\t\t\t\ttemplate   = controls.querySelector('.setting-wefts .repeater-template'),\n\t\t\t\tnewElem    = template.cloneNode(true),\n\t\t\t\tremoveBtn  = newElem.querySelector('.remove-btn');\n\n\t\t\tnewElem.classList.remove('repeater-template');\n\t\t\tweftsInner.appendChild(newElem);\n\t\t\tremoveBtn.addEventListener('click', removeWeft);\n\n\t\t\tif (color !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"color\"]').value = color;\n\t\t\t}\n\t\t}\n\n\t\tvar removeWeft = function(e) {\n\t\t\tlet row = e.target.closest('.repeater-single');\n\t\t\te.target.removeEventListener('click', removeWeft);\n\t\t\trow.parentElement.removeChild(row);\n\t\t}\n\n\t\tvar addWarp = function(color, pattern) {\n\t\t\tlet warpsInner = controls.querySelector('.setting-warps .repeater-elements'),\n\t\t\t\ttemplate   = controls.querySelector('.setting-warps .repeater-template'),\n\t\t\t\tnewElem    = template.cloneNode(true),\n\t\t\t\tremoveBtn  = newElem.querySelector('.remove-btn');\n\n\t\t\tnewElem.classList.remove('repeater-template');\n\t\t\twarpsInner.appendChild(newElem);\n\t\t\tremoveBtn.addEventListener('click', removeWarp);\n\n\t\t\tif (color !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"color\"]').value = color;\n\t\t\t}\n\n\t\t\tif (pattern !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"text\"]').value = pattern;\n\t\t\t}\n\t\t}\n\n\t\tvar removeWarp = function(e) {\n\t\t\tlet row = e.target.closest('.repeater-single');\n\t\t\te.target.removeEventListener('click', removeWarp);\n\t\t\trow.parentElement.removeChild(row);\n\t\t}\n\n\t\tvar saveFrame = function() {\n\t\t\tlet now      = new Date(),\n\t\t\t\tpadThis  = n => n.toString().padStart(2, '0'),\n\t\t\t\tfileName = seedInput.value.length > 0\n\t\t\t\t\t\t ? 'loom_seed_' + seedInput.value\n\t\t\t\t\t\t : 'loom_' + now.getFullYear() + '-' + padThis(now.getMonth() + 1) + '-' + padThis(now.getDate())\n\t\t\t\t\t\t + ' ' + padThis(now.getHours()) + '-' + padThis(now.getMinutes()) + '-' + padThis(now.getSeconds());\n\t\t\tp5Sketch.save(fileName + '.jpg');\n\t\t}\n\n\t\tvar toggleSettings = function() {\n\t\t\tsettings.classList.toggle('show-settings');\n\t\t}\n\n\t\tvar luckyMode = function() {\n\t\t\tvar seedLength = parseInt(lerp(Math.random(), 1, 100)),\n\t\t\t\tseedString = '',\n    \t\t\tchars      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n\t\t\tfor (var i = 0; i < seedLength; i++) {\n\t\t\t\tseedString += chars.charAt(Math.floor(Math.random() * chars.length));\n\t\t\t}\n\n\n\t\t\tseedInput.value = seedString; // hacky but I don't care, it's late\n\t\t\tresetLoom();\n\t\t}\n\n\n\n\t\t/***************************************\n\t\t\tDrawing\n\t\t***************************************/\n\n\t\tvar sketch = function(p) {\n\t\t\tlet wefts         = [],\n\t\t\t\tnumWefts,\n\t\t\t\twarps         = [];\n\n\t\t\tvar\toffsetX          = 0.5 * args.threadWidth,\n\t\t\t\tcurrentY         = 0,\n\t\t\t\tcurrentWarpIndex = 0;\n\n\t\t\tp.setup = function() {\n\t\t\t\tp.createCanvas(sketchContainer.clientWidth, sketchContainer.clientHeight);\n\t\t\t\tnumWefts = getNumWefts();\n\n\t\t\t\tfor (let x = 0; x < numWefts; x++) {\n\t\t\t\t\twefts.push(new Weft({\n\t\t\t\t\t\tx:    \t\tx * args.threadTotal + offsetX, // offset because stroke is drawn centered\n\t\t\t\t\t\tcolor:\t\targs.weftColors[x % args.weftColors.length],\n\t\t\t\t\t\tgap:        args.threadSpacing,\n\t\t\t\t\t\tstep:       args.threadTotal,\n\t\t\t\t\t\twidth:\t\targs.threadWidth\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tfor (let y = 0; y < args.warpSettings.length; y++) {\n\t\t\t\t\twarps.push(new Warp({\n\t\t\t\t\t\tcolor:  \targs.warpSettings[y].color,\n\t\t\t\t\t\tgap:        args.threadSpacing,\n\t\t\t\t\t\tstep:       args.threadTotal,\n\t\t\t\t\t\twidth:  \targs.threadWidth,\n\t\t\t\t\t\tnumWefts:   numWefts,\n\t\t\t\t\t\tpattern:\targs.warpSettings[y].pattern\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tp.background(255);\n\t\t\t}\n\n\n\t\t\t/***************************************\n\t\t\t\tDraw row by row\n\t\t\t***************************************/\n\n\t\t\tp.draw = function() {\n\t\t\t\tif (currentY * args.threadTotal > p.height)\n\t\t\t\t\treturn p.noLoop();\n\n\t\t\t\tlet currentWarp = warps[currentWarpIndex];\n\n\t\t\t\tfor (var x = 0; x < numWefts; x++) {\n\t\t\t\t\tlet underOrOver = currentWarp.weave(x, currentY);\n\t\t\t\t\tif (underOrOver == 'under')\n\t\t\t\t\t \twefts[x].weave(currentY);\n\t\t\t\t}\n\n\t\t\t\tcurrentWarpIndex = wrapIndex(currentWarpIndex + 1, 0, args.warpSettings.length - 1);\n\t\t\t\tcurrentY++;\n\t\t\t}\n\n\n\t\t\t/***************************************\n\t\t\t\tWarps: horizontal threads\n\t\t\t***************************************/\n\n\t\t\tclass Warp {\n\t\t\t\tconstructor(args) {\n\t\t\t\t\tthis.args            = args;\n\t\t\t\t\tthis.counter         = 0;\n\t\t\t\t}\n\n\t\t\t\tweave(currentX, currentY) {\n\t\t\t\t\tthis.counter = wrapIndex(this.counter + 1, 0, this.args.pattern.length - 1);\n\n\t\t\t\t//\tgo under?\n\t\t\t\t\tif (this.args.pattern[this.counter] == 0)\n\t\t\t\t\t\treturn 'under';\n\n\t\t\t\t//\tgo over!\n\t\t\t\t\tlet\tstartX =  currentX      * this.args.step - this.args.gap,\n\t\t\t\t\t\tendX   = (currentX + 1) * this.args.step,\n\t\t\t\t\t\ty      = currentY * this.args.step + 0.5 * (this.args.width);\n\n\t\t\t\t\tp.strokeCap(p.SQUARE);\n\t\t\t\t\tp.strokeWeight(this.args.width);\n\t\t\t\t\tp.stroke(this.args.color);\n\t\t\t\t\tp.line(startX, y, endX, y);\n\t\t\t\t\treturn 'over';\n\t\t\t\t}\n\t\t\t}\n\n\n\n\t\t\t/***************************************\n\t\t\t\tWefts: vertical threads\n\t\t\t***************************************/\n\n\t\t\tclass Weft {\n\t\t\t\tconstructor(args) {\n\t\t\t\t\tthis.args  = args;\n\t\t\t\t}\n\n\t\t\t\tweave(currentY) {\n\t\t\t\t\tlet startY =  currentY      * this.args.step - this.args.gap,\n\t\t\t\t\t\tendY   = (currentY + 1) * this.args.step + this.args.gap;\n\n\t\t\t\t\tp.strokeCap(p.SQUARE);\n\t\t\t\t\tp.strokeWeight(this.args.width);\n\t\t\t\t\tp.stroke(this.args.color);\n\t\t\t\t\tp.line(this.args.x, startY, this.args.x, endY);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar getNumWefts = function() {\n\t\t\t\tlet minWidth      = Math.floor(p.width / args.threadTotal),\n\t\t\t\t\tmaxWidth      = Math.ceil(minWidth / args.patternWidth) * args.patternWidth + Math.floor(0.5 * args.patternWidth);\n\t\t\t\treturn maxWidth;\n\t\t\t}\n\t\t}\n\n\t\t/***************************************\n\t\t\tHelper functions\n\t\t***************************************/\n\n\t\tvar wrapIndex = function(n, min, max) {\n\t\t\tif (n >= min && n <= max)\treturn n;\n\t\t\tif (n > max)\t\t\t\treturn min;\n\t\t\t\t\t\t\t\t\t\treturn max;\n\t\t}\n\n\t\tvar limit = function(n, min, max) {\n\t\t\treturn Math.min(Math.max(n, min), max);\n\t\t}\n\n\t\tvar lerp = function(n, min, max) {\n        \treturn min + (max - min) * limit(n, 0, 1);\n\t\t}\n\n\t\t// seeded pseudo-random number generator\n\t\tvar xmur3 = function(seed) {\n\t\t\tfor (var i = 0, h = 1779033703 ^ seed.length; i < seed.length; i++) {\n\t\t\t\th = Math.imul(h ^ seed.charCodeAt(i), 3432918353);\n\t\t\t\th = h << 13 | h >>> 19;\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\th = Math.imul(h ^ h >>> 16, 2246822507);\n\t\t\t\th = Math.imul(h ^ h >>> 13, 3266489909);\n\t\t\t\th = (h ^= h >>> 16) >>> 0;\n\t\t\t\treturn h / Math.pow(10, h.toString().length);\n\t\t\t}\n\t\t}\n\n\t\tvar perlin1D = function(seed, wavelength) {\n\t\t\tlet M          = 1853020188851841,\t// 3^30\n\t\t\t    A          = 14348908,\t        // A - 1 has to be divisible by M's prime factors (3^15 + 1)\n\t\t\t    C          = 11, \t\t\t    // C and M are co-prime,\n\t\t\t\tZ          = Math.floor(seed * M),\n\t\t\t\trandomNum  = function() {\n\t\t\t\t\tZ = (A * Z + C) % M;\n\t\t\t\t\treturn Z / M - 0.5;\n\t\t\t\t},\n\t\t\t\th          = 1,\n\t\t\t\tx          = 0,\n\t\t\t\ty          = h / 2,\n\t\t\t\tamplitude  = 100, \t\t\t\t// amplitude\n\t\t\t\ta          = randomNum(),\n\t\t\t\tb          = randomNum();\n\n\t\t\tvar interpolate = function(pa, pb, px) {\n\t\t\t\tvar ft = px * Math.PI,\n\t\t\t\t\tf = (1 - Math.cos(ft)) * 0.5;\n\t\t\t\treturn pa * (1 - f) + pb * f;\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\tif (x % wavelength === 0) {\n\t\t\t\t\ta = b;\n\t\t\t\t\tb = randomNum();\n\t\t\t\t\ty = h / 2 + a * amplitude;\n\t\t\t\t} else {\n\t\t\t\t\ty = h / 2 + interpolate(a, b, (x % wavelength) / wavelength) * amplitude;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tx += 1;\n\t\t\t\treturn y;\n\t\t\t}\n\t\t}\n\n\t\tvar generateRandomColorSet = function(PRNG) {\n\t\t\tlet hue        = parseInt(lerp(PRNG(), 0, 359)),\n\t\t\t\tschemes    = ['mono', 'contrast', 'triade', 'tetrade', 'analogic'],\n\t\t\t\tvariations = ['default', 'pastel', 'soft', 'light', 'hard', 'pale'],\n\t\t\t\tscheme     = schemes[parseInt(lerp(PRNG(), 0, schemes.length - 1))],\n\t\t\t\tvariation  = variations[parseInt(lerp(PRNG(), 0, variations.length - 1))],\n\t\t\t\tcolorSet   = new ColorScheme();\n\n\t\t\tcolorSet.from_hue(hue).scheme(scheme);\n\t\t\tif (['triade', 'tetrade', 'analogic'].indexOf(scheme) > -1)\n\t\t\t\tcolorSet.distance(lerp(PRNG(), 0.25, 0.5));\n\t\t\t\n\t\t\tlet colors = colorSet.variation(variation).colors();\n\t\t\treturn colors.map(color => '#' + color);\n\t\t}\n\n\t\tregisterEvents();\n\t\tluckyMode();\n\t}\n\n\n\n\n\n\n\t/***************************************\n\t\tCredits\n\t***************************************/\n\n\tvar credits = function() {\n\t\tvar credits = '**********\\n\\nThis website was built by Matthias Planitzer.\\nwww.matthias-planitzer.de\\n\\n**********';\n\t\tconsole.log('%c' + credits, 'color: #00F; font-family: Helvetica Neue\", Helvetica, sans-serif; font-size: 14px;');\t\n\t}\n\n\tinit();\n})();"]}