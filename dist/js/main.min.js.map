{"version":3,"sources":["main.js"],"names":["resizeBody","changeHeight","document","window","setTimeout","loom","sketchContainer","controls","settings","settingsToggle","addWeftBtn","querySelector","removeWeftBtns","addWarpBtn","removeWarpBtns","seedInput","slice","generateBtn","luckyBtn","downloadBtn","addEventListener","args","parseArgs","p5Sketch","e","initLoom","generateFromString","threadWidth","parseFloat","threadSpacing","patternWidth","parseInt","weftColors","input","value","warps","pattern","color","row","warpSettings","threadTotal","threadWidthInput","threadSpacingInput","getRandomNumber","numWefts","lerp","colors","xmur3","i","numWarps","newColor","addWeft","generateRandomColorSet","patternLength","newPattern","addWarp","patternPerlin","perlin1D","n","weftsInner","template","newElem","removeWeft","removeBtn","parentElement","warpsInner","appendChild","removeWarp","target","save","saveFrame","now","luckyMode","padThis","seedLength","fileName","seedString","toggleSettings","resetLoom","Math","chars","offsetX","wefts","Weft","x","step","width","currentWarpIndex","p","length","getNumWefts","gap","y","draw","currentY","currentWarp","underOrOver","wrapIndex","strokeWeight","startX","currentX","endX","startY","minWidth","endY","maxWidth","min","max","h","charCodeAt","imul","limit","seed","A","Z","C","floor","M","amplitude","randomNum","wavelength","interpolate","a","b","ft","px","pa","pb","ColorScheme","colorSet","from_hue","scheme","schemes","variations","PRNG","variation","registerEvents","btn","forEach","credits","console","init"],"mappings":"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","file":"main.min.js","sourcesContent":["\"use strict\";\n\n(function() {\n\n\t/***************************************\n\t\tCommon methods\n\t***************************************/\n\n\tvar vpWidth = function() { return Math.max(document.documentElement.clientWidth, window.innerWidth || 0); }\n\tvar vpHeight = function() { return Math.max(document.documentElement.clientHeight, window.innerHeight || 0); }\n\n\t\n\tvar init = function() {\n\t\tresizeBody();\n\t\tloom();\n\t\tcredits();\n\t}\n\n\n\n\t/***************************************\n\t\tResize body\n\t***************************************/\n\n\tvar resizeBody = function() {\n\t\tvar changeHeight = function() {\n\t\t\tdocument.documentElement.style.setProperty('--vw', (0.01 * document.body.clientWidth) + 'px');\n\t\t\tdocument.documentElement.style.setProperty('--vh', (0.01 * window.innerHeight) + 'px');\n\t\t\tdocument.body.style.height = window.innerHeight + 'px';\n\t\t}\n\n\t\tsetTimeout(changeHeight, 20); // older Safari iOS will lag\n\t\twindow.addEventListener('resize', changeHeight);\n\t}\n\n\n\n\n\n\t/***************************************\n\t\tLoom\n\t***************************************/\n\n\tvar loom = function() {\n\t\tvar sketchContainer = document.querySelector('.sketch-container'),\n\t\t\tcontrols        = document.querySelector('.controls'),\n\t\t\tsettings        = controls.querySelector('.settings'),\n\t\t\tsettingsToggle  = settings.querySelector('.settings-toggle'),\n\t\t\taddWeftBtn      = controls.querySelector('.add-weft-btn'),\n\t\t\tremoveWeftBtns  = [].slice.call(controls.querySelectorAll('.setting-wefts .remove-btn')),\n\t\t\taddWarpBtn      = controls.querySelector('.add-warp-btn'),\n\t\t\tremoveWarpBtns  = [].slice.call(controls.querySelectorAll('.setting-warps .remove-btn')),\n\t\t\tseedInput       = controls.querySelector('#seed'),\n\t\t\tgenerateBtn     = controls.querySelector('#generate'),\n\t\t\tluckyBtn        = controls.querySelector('#lucky'),\n\t\t\tdownloadBtn     = controls.querySelector('#download'),\n\t\t\targs, p5Sketch;\n\n\t\tvar registerEvents = function() {\n\t\t\tsettingsToggle.addEventListener('click', toggleSettings);\n\t\t\taddWeftBtn.addEventListener(    'click', addWeft);\n\t\t\tremoveWeftBtns.forEach(btn =>\n\t\t\t\tbtn.addEventListener(       'click', removeWeft)\n\t\t\t);\n\t\t\taddWarpBtn.addEventListener(    'click', addWarp);\n\t\t\tremoveWarpBtns.forEach(btn =>\n\t\t\t\tbtn.addEventListener(       'click', removeWarp)\n\t\t\t);\n\n\t\t\tgenerateBtn.addEventListener(   'click', resetLoom);\n\t\t\tluckyBtn.addEventListener(      'click', luckyMode);\n\t\t\tdownloadBtn.addEventListener(   'click', saveFrame);\n\t\t\tcontrols.addEventListener(     'submit', resetLoom);\n\t\t}\n\n\t\tvar initLoom = function() {\n\t\t\targs            = parseArgs();\n\t\t\tp5Sketch        = new p5(sketch, sketchContainer);\n\t\t}\n\n\t\tvar resetLoom = function(e) {\n\t\t\tif (e)\t\t\te.preventDefault();\n\t\t\tif (p5Sketch)\tp5Sketch.remove();\n\n\t\t\tinitLoom();\n\t\t}\n\n\t\tvar parseArgs = function() {\n\t\t\tif (seedInput.value.length > 0)\n\t\t\t\tgenerateFromString(seedInput.value);\n\n\t\t\tlet threadWidth   = parseFloat(document.querySelector('#thread-width').value),\n\t\t\t\tthreadSpacing = parseFloat(document.querySelector('#thread-spacing').value),\n\t\t\t\tpatternWidth  = parseInt(document.querySelector('#pattern-width').value);\n\n\t\t\tlet weftColors    = [].slice.call(controls.querySelectorAll('.setting-wefts .repeater-elements input[type=\"color\"]'))\n\t\t\t\t\t\t\t\t  .map(input => input.value);\n\n\t\t\tlet warps         = [].slice.call(controls.querySelectorAll('.setting-warps .repeater-elements .repeater-single'))\n\t\t\t\t\t\t\t\t  .map(function(row) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tcolor:   row.querySelector('input[type=\"color\"]').value,\n\t\t\t\t\t\t\t\t\t\t\tpattern: row.querySelector('input[type=\"text\"]').value\n\t\t\t\t\t\t\t\t\t\t\t\t\t    .replace(/[^01]/g, '')\n\t\t\t\t\t\t\t\t\t\t\t\t\t    .split(''),\n\t\t\t\t\t\t\t\t  \t\t}\n\t\t\t\t\t\t\t\t  });\n\n\t\t\treturn {\n\t\t\t\tthreadWidth: \tthreadWidth,\n\t\t\t\tthreadSpacing:\tthreadSpacing,\n\t\t\t\tthreadTotal:    threadWidth + threadSpacing,\n\t\t\t\tpatternWidth:\tpatternWidth,\n\t\t\t\tweftColors: \tweftColors,\n\t\t\t\twarpSettings:   warps \n\t\t\t};\n\t\t}\n\n\t\tvar generateFromString = function(seed) {\n\t\t\tlet threadWidthInput   = document.querySelector('#thread-width'),\n\t\t\t\tthreadSpacingInput = document.querySelector('#thread-spacing'),\n\t\t\t\tpatternWidth       = document.querySelector('#pattern-width');\n\n\t\t\t//\tclear everything\n\t\t\tdocument.querySelector('.setting-wefts .repeater-elements').innerHTML = '';\n\t\t\tdocument.querySelector('.setting-warps .repeater-elements').innerHTML = '';\n\n\n\t\t\tlet getRandomNumber = xmur3(seed),\n\t\t\t\tnumWefts        = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tnumWarps        = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tthreadWidth     = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tcolors          = generateRandomColorSet(getRandomNumber);\n\n\t\t\tthreadWidthInput.value   = threadWidth;\n\t\t\tthreadSpacingInput.value = parseInt(lerp(getRandomNumber(), 0, 0.5 * threadWidth));\n\t\t\tpatternWidth.value       = parseInt(lerp(getRandomNumber(), 3 * numWefts, 10 * numWefts));\n\n\t\t\tfor (let i = 0; i < numWefts; i++) {\n\t\t\t\tlet newColor = colors[parseInt(lerp(getRandomNumber(), 0, colors.length - 1))];\n\t\t\t\taddWeft(newColor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < numWarps; i++) {\n\t\t\t\tlet newColor      = colors[parseInt(lerp(getRandomNumber(), 0, colors.length - 1))],\n\t\t\t\t\tpatternLength = parseInt(lerp(getRandomNumber(), 4, 200)),\n\t\t\t\t\tpatternPerlin = perlin1D(getRandomNumber()),\n\t\t\t\t\tnewPattern    = '';\n\n\t\t\t\tfor (let n = 0; n < patternLength; n++) {\n\t\t\t\t\tnewPattern = newPattern + (patternPerlin() < 0.5 ? '0' : '1');\n\t\t\t\t}\n\n\t\t\t\taddWarp(newColor, newPattern);\n\t\t\t}\n\t\t}\n\n\n\n\t\t/***************************************\n\t\t\tInterface\n\t\t***************************************/\n\n\t\tvar addWeft = function(color) {\n\t\t\tlet weftsInner = controls.querySelector('.setting-wefts .repeater-elements'),\n\t\t\t\ttemplate   = controls.querySelector('.setting-wefts .repeater-template'),\n\t\t\t\tnewElem    = template.cloneNode(true),\n\t\t\t\tremoveBtn  = newElem.querySelector('.remove-btn');\n\n\t\t\tnewElem.classList.remove('repeater-template');\n\t\t\tweftsInner.appendChild(newElem);\n\t\t\tremoveBtn.addEventListener('click', removeWeft);\n\n\t\t\tif (color !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"color\"]').value = color;\n\t\t\t}\n\t\t}\n\n\t\tvar removeWeft = function(e) {\n\t\t\tlet row = e.target.closest('.repeater-single');\n\t\t\te.target.removeEventListener('click', removeWeft);\n\t\t\trow.parentElement.removeChild(row);\n\t\t}\n\n\t\tvar addWarp = function(color, pattern) {\n\t\t\tlet warpsInner = controls.querySelector('.setting-warps .repeater-elements'),\n\t\t\t\ttemplate   = controls.querySelector('.setting-warps .repeater-template'),\n\t\t\t\tnewElem    = template.cloneNode(true),\n\t\t\t\tremoveBtn  = newElem.querySelector('.remove-btn');\n\n\t\t\tnewElem.classList.remove('repeater-template');\n\t\t\twarpsInner.appendChild(newElem);\n\t\t\tremoveBtn.addEventListener('click', removeWarp);\n\n\t\t\tif (color !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"color\"]').value = color;\n\t\t\t}\n\n\t\t\tif (pattern !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"text\"]').value = pattern;\n\t\t\t}\n\t\t}\n\n\t\tvar removeWarp = function(e) {\n\t\t\tlet row = e.target.closest('.repeater-single');\n\t\t\te.target.removeEventListener('click', removeWarp);\n\t\t\trow.parentElement.removeChild(row);\n\t\t}\n\n\t\tvar saveFrame = function() {\n\t\t\tlet now      = new Date(),\n\t\t\t\tpadThis  = n => n.toString().padStart(2, '0'),\n\t\t\t\tfileName = 'loom_' + now.getFullYear() + '-' + padThis(now.getMonth() + 1) + '-' + padThis(now.getDate())\n\t\t\t\t\t\t + ' ' + padThis(now.getHours()) + '-' + padThis(now.getMinutes()) + '-' + padThis(now.getSeconds());\n\t\t\tp5Sketch.save(fileName + '.jpg');\n\t\t}\n\n\t\tvar toggleSettings = function() {\n\t\t\tsettings.classList.toggle('show-settings');\n\t\t}\n\n\t\tvar luckyMode = function() {\n\t\t\tvar seedLength = parseInt(lerp(Math.random(), 1, 100)),\n\t\t\t\tseedString = '',\n    \t\t\tchars      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n\t\t\tfor (var i = 0; i < seedLength; i++) {\n\t\t\t\tseedString += chars.charAt(Math.floor(Math.random() * chars.length));\n\t\t\t}\n\n\n\t\t\tseedInput.value = seedString; // hacky but I don't care, it's late\n\t\t\tresetLoom();\n\t\t}\n\n\n\n\t\t/***************************************\n\t\t\tDrawing\n\t\t***************************************/\n\n\t\tvar sketch = function(p) {\n\t\t\tlet wefts         = [],\n\t\t\t\tnumWefts,\n\t\t\t\twarps         = [];\n\n\t\t\tvar\toffsetX          = 0.5 * args.threadWidth,\n\t\t\t\tcurrentY         = 0,\n\t\t\t\tcurrentWarpIndex = 0;\n\n\t\t\tp.setup = function() {\n\t\t\t\tp.createCanvas(sketchContainer.clientWidth, sketchContainer.clientHeight);\n\t\t\t\tnumWefts = getNumWefts();\n\n\t\t\t\tfor (let x = 0; x < numWefts; x++) {\n\t\t\t\t\twefts.push(new Weft({\n\t\t\t\t\t\tx:    \t\tx * args.threadTotal + offsetX, // offset because stroke is drawn centered\n\t\t\t\t\t\tcolor:\t\targs.weftColors[x % args.weftColors.length],\n\t\t\t\t\t\tgap:        args.threadSpacing,\n\t\t\t\t\t\tstep:       args.threadTotal,\n\t\t\t\t\t\twidth:\t\targs.threadWidth\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tfor (let y = 0; y < args.warpSettings.length; y++) {\n\t\t\t\t\twarps.push(new Warp({\n\t\t\t\t\t\tcolor:  \targs.warpSettings[y].color,\n\t\t\t\t\t\tgap:        args.threadSpacing,\n\t\t\t\t\t\tstep:       args.threadTotal,\n\t\t\t\t\t\twidth:  \targs.threadWidth,\n\t\t\t\t\t\tnumWefts:   numWefts,\n\t\t\t\t\t\tpattern:\targs.warpSettings[y].pattern\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tp.background(255);\n\t\t\t}\n\n\n\t\t\t/***************************************\n\t\t\t\tDraw row by row\n\t\t\t***************************************/\n\n\t\t\tp.draw = function() {\n\t\t\t\tif (currentY * args.threadTotal > p.height)\n\t\t\t\t\treturn p.noLoop();\n\n\t\t\t\tlet currentWarp = warps[currentWarpIndex];\n\n\t\t\t\tfor (var x = 0; x < numWefts; x++) {\n\t\t\t\t\tlet underOrOver = currentWarp.weave(x, currentY);\n\t\t\t\t\tif (underOrOver == 'under')\n\t\t\t\t\t \twefts[x].weave(currentY);\n\t\t\t\t}\n\n\t\t\t\tcurrentWarpIndex = wrapIndex(currentWarpIndex + 1, 0, args.warpSettings.length - 1);\n\t\t\t\tcurrentY++;\n\t\t\t}\n\n\n\t\t\t/***************************************\n\t\t\t\tWarps: horizontal threads\n\t\t\t***************************************/\n\n\t\t\tclass Warp {\n\t\t\t\tconstructor(args) {\n\t\t\t\t\tthis.args            = args;\n\t\t\t\t\tthis.counter         = 0;\n\t\t\t\t}\n\n\t\t\t\tweave(currentX, currentY) {\n\t\t\t\t\tthis.counter = wrapIndex(this.counter + 1, 0, this.args.pattern.length - 1);\n\n\t\t\t\t//\tgo under?\n\t\t\t\t\tif (this.args.pattern[this.counter] == 0)\n\t\t\t\t\t\treturn 'under';\n\n\t\t\t\t//\tgo over!\n\t\t\t\t\tlet\tstartX =  currentX      * this.args.step - this.args.gap,\n\t\t\t\t\t\tendX   = (currentX + 1) * this.args.step,\n\t\t\t\t\t\ty      = currentY * this.args.step + 0.5 * (this.args.width);\n\n\t\t\t\t\tp.strokeCap(p.SQUARE);\n\t\t\t\t\tp.strokeWeight(this.args.width);\n\t\t\t\t\tp.stroke(this.args.color);\n\t\t\t\t\tp.line(startX, y, endX, y);\n\t\t\t\t\treturn 'over';\n\t\t\t\t}\n\t\t\t}\n\n\n\n\t\t\t/***************************************\n\t\t\t\tWefts: vertical threads\n\t\t\t***************************************/\n\n\t\t\tclass Weft {\n\t\t\t\tconstructor(args) {\n\t\t\t\t\tthis.args  = args;\n\t\t\t\t}\n\n\t\t\t\tweave(currentY) {\n\t\t\t\t\tlet startY =  currentY      * this.args.step - this.args.gap,\n\t\t\t\t\t\tendY   = (currentY + 1) * this.args.step + this.args.gap;\n\n\t\t\t\t\tp.strokeCap(p.SQUARE);\n\t\t\t\t\tp.strokeWeight(this.args.width);\n\t\t\t\t\tp.stroke(this.args.color);\n\t\t\t\t\tp.line(this.args.x, startY, this.args.x, endY);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar getNumWefts = function() {\n\t\t\t\tlet minWidth      = Math.floor(p.width / args.threadTotal),\n\t\t\t\t\tmaxWidth      = Math.ceil(minWidth / args.patternWidth) * args.patternWidth + Math.floor(0.5 * args.patternWidth);\n\t\t\t\treturn maxWidth;\n\t\t\t}\n\t\t}\n\n\t\t/***************************************\n\t\t\tHelper functions\n\t\t***************************************/\n\n\t\tvar wrapIndex = function(n, min, max) {\n\t\t\tif (n >= min && n <= max)\treturn n;\n\t\t\tif (n > max)\t\t\t\treturn min;\n\t\t\t\t\t\t\t\t\t\treturn max;\n\t\t}\n\n\t\tvar limit = function(n, min, max) {\n\t\t\treturn Math.min(Math.max(n, min), max);\n\t\t}\n\n\t\tvar lerp = function(n, min, max) {\n        \treturn min + (max - min) * limit(n, 0, 1);\n\t\t}\n\n\t\t// seeded pseudo-random number generator\n\t\tvar xmur3 = function(seed) {\n\t\t\tfor (var i = 0, h = 1779033703 ^ seed.length; i < seed.length; i++) {\n\t\t\t\th = Math.imul(h ^ seed.charCodeAt(i), 3432918353);\n\t\t\t\th = h << 13 | h >>> 19;\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\th = Math.imul(h ^ h >>> 16, 2246822507);\n\t\t\t\th = Math.imul(h ^ h >>> 13, 3266489909);\n\t\t\t\th = (h ^= h >>> 16) >>> 0;\n\t\t\t\treturn h / Math.pow(10, h.toString().length);\n\t\t\t}\n\t\t}\n\n\t\tvar perlin1D = function(seed) {\n\t\t\tlet M          = 1853020188851841,\t// 3^30\n\t\t\t    A          = 14348908,\t        // A - 1 has to be divisible by M's prime factors (3^15 + 1)\n\t\t\t    C          = 11, \t\t\t    // C and M are co-prime,\n\t\t\t\tZ          = Math.floor(seed * M),\n\t\t\t\trandomNum  = function() {\n\t\t\t\t\tZ = (A * Z + C) % M;\n\t\t\t\t\treturn Z / M - 0.5;\n\t\t\t\t},\n\t\t\t\th          = 1,\n\t\t\t\tx          = 0,\n\t\t\t\ty          = h / 2,\n\t\t\t\tamplitude  = 100, \t\t\t\t// amplitude\n\t\t\t\twavelength = 100, \t\t\t\t// wavelength\n\t\t\t\ta          = randomNum(),\n\t\t\t\tb          = randomNum();\n\n\t\t\tvar interpolate = function(pa, pb, px) {\n\t\t\t\tvar ft = px * Math.PI,\n\t\t\t\t\tf = (1 - Math.cos(ft)) * 0.5;\n\t\t\t\treturn pa * (1 - f) + pb * f;\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\tif (x % wavelength === 0) {\n\t\t\t\t\ta = b;\n\t\t\t\t\tb = randomNum();\n\t\t\t\t\ty = h / 2 + a * amplitude;\n\t\t\t\t} else {\n\t\t\t\t\ty = h / 2 + interpolate(a, b, (x % wavelength) / wavelength) * amplitude;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tx += 1;\n\t\t\t\treturn y;\n\t\t\t}\n\t\t}\n\n\t\tvar generateRandomColorSet = function(PRNG) {\n\t\t\tlet hue        = parseInt(lerp(PRNG(), 0, 359)),\n\t\t\t\tschemes    = ['mono', 'contrast', 'triade', 'tetrade', 'analogic'],\n\t\t\t\tvariations = ['default', 'pastel', 'soft', 'light', 'hard', 'pale'],\n\t\t\t\tscheme     = schemes[parseInt(lerp(PRNG(), 0, schemes.length - 1))],\n\t\t\t\tvariation  = variations[parseInt(lerp(PRNG(), 0, variations.length - 1))],\n\t\t\t\tcolorSet   = new ColorScheme();\n\n\t\t\tcolorSet.from_hue(hue).scheme(scheme);\n\t\t\tif (['triade', 'tetrade', 'analogic'].indexOf(scheme) > -1)\n\t\t\t\tcolorSet.distance(lerp(PRNG(), 0.25, 0.5));\n\t\t\t\n\t\t\tlet colors = colorSet.variation(variation).colors();\n\t\t\treturn colors.map(color => '#' + color);\n\t\t}\n\n\t\tregisterEvents();\n\t\tluckyMode();\n\t}\n\n\n\n\n\n\n\t/***************************************\n\t\tCredits\n\t***************************************/\n\n\tvar credits = function() {\n\t\tvar credits = '**********\\n\\nThis website was built by Matthias Planitzer.\\nwww.matthias-planitzer.de\\n\\n**********';\n\t\tconsole.log('%c' + credits, 'color: #00F; font-family: Helvetica Neue\", Helvetica, sans-serif; font-size: 14px;');\t\n\t}\n\n\tinit();\n})();"]}