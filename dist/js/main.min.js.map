{"version":3,"sources":["main.js"],"names":["resizeBody","changeHeight","document","window","setTimeout","loom","sketchContainer","controls","settings","settingsToggle","addWeftBtn","querySelector","removeWeftBtns","addWarpBtn","removeWarpBtns","seedInput","slice","generateBtn","luckyBtn","downloadBtn","addEventListener","args","parseArgs","p5Sketch","e","initLoom","generateFromString","threadWidth","parseFloat","threadSpacing","patternWidth","parseInt","weftColors","input","value","warps","pattern","color","row","warpSettings","threadTotal","threadWidthInput","threadSpacingInput","getRandomNumber","numWefts","lerp","colors","xmur3","i","numWarps","newColor","addWeft","generateRandomColorSet","patternLength","newPattern","addWarp","n","weftsInner","template","newElem","removeWeft","removeBtn","parentElement","warpsInner","appendChild","removeWarp","target","classList","saveFrame","now","fileName","seedLength","seedString","Math","floor","chars","toggleSettings","resetLoom","luckyMode","wefts","currentWarpIndex","gap","width","offsetX","currentY","step","x","p","background","y","draw","currentWarp","underOrOver","Warp","wrapIndex","startX","currentX","endX","Weft","maxWidth","startY","endY","getNumWefts","minWidth","limit","h","min","max","pow","toString","hue","seed","schemes","variations","colorSet","from_hue","registerEvents","PRNG","scheme","variation","credits","btn","forEach","console","init"],"mappings":"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","file":"main.min.js","sourcesContent":["\"use strict\";\n\n(function() {\n\n\t/***************************************\n\t\tCommon methods\n\t***************************************/\n\n\tvar vpWidth = function() { return Math.max(document.documentElement.clientWidth, window.innerWidth || 0); }\n\tvar vpHeight = function() { return Math.max(document.documentElement.clientHeight, window.innerHeight || 0); }\n\n\t\n\tvar init = function() {\n\t\tresizeBody();\n\t\tloom();\n\t\tcredits();\n\t}\n\n\n\n\t/***************************************\n\t\tResize body\n\t***************************************/\n\n\tvar resizeBody = function() {\n\t\tvar changeHeight = function() {\n\t\t\tdocument.documentElement.style.setProperty('--vw', (0.01 * document.body.clientWidth) + 'px');\n\t\t\tdocument.documentElement.style.setProperty('--vh', (0.01 * window.innerHeight) + 'px');\n\t\t\tdocument.body.style.height = window.innerHeight + 'px';\n\t\t}\n\n\t\tsetTimeout(changeHeight, 20); // older Safari iOS will lag\n\t\twindow.addEventListener('resize', changeHeight);\n\t}\n\n\n\n\n\n\t/***************************************\n\t\tLoom\n\t***************************************/\n\n\tvar loom = function() {\n\t\tvar sketchContainer = document.querySelector('.sketch-container'),\n\t\t\tcontrols        = document.querySelector('.controls'),\n\t\t\tsettings        = controls.querySelector('.settings'),\n\t\t\tsettingsToggle  = settings.querySelector('.settings-toggle'),\n\t\t\taddWeftBtn      = controls.querySelector('.add-weft-btn'),\n\t\t\tremoveWeftBtns  = [].slice.call(controls.querySelectorAll('.setting-wefts .remove-btn')),\n\t\t\taddWarpBtn      = controls.querySelector('.add-warp-btn'),\n\t\t\tremoveWarpBtns  = [].slice.call(controls.querySelectorAll('.setting-warps .remove-btn')),\n\t\t\tseedInput       = controls.querySelector('#seed'),\n\t\t\tgenerateBtn     = controls.querySelector('#generate'),\n\t\t\tluckyBtn        = controls.querySelector('#lucky'),\n\t\t\tdownloadBtn     = controls.querySelector('#download'),\n\t\t\targs, p5Sketch;\n\n\t\tvar registerEvents = function() {\n\t\t\tsettingsToggle.addEventListener('click', toggleSettings);\n\t\t\taddWeftBtn.addEventListener(    'click', addWeft);\n\t\t\tremoveWeftBtns.forEach(btn =>\n\t\t\t\tbtn.addEventListener(       'click', removeWeft)\n\t\t\t);\n\t\t\taddWarpBtn.addEventListener(    'click', addWarp);\n\t\t\tremoveWarpBtns.forEach(btn =>\n\t\t\t\tbtn.addEventListener(       'click', removeWarp)\n\t\t\t);\n\n\t\t\tgenerateBtn.addEventListener(   'click', resetLoom);\n\t\t\tluckyBtn.addEventListener(      'click', luckyMode);\n\t\t\tdownloadBtn.addEventListener(   'click', saveFrame);\n\t\t\tcontrols.addEventListener(     'submit', resetLoom);\n\t\t}\n\n\t\tvar initLoom = function() {\n\t\t\targs            = parseArgs();\n\t\t\tp5Sketch        = new p5(sketch, sketchContainer);\n\t\t}\n\n\t\tvar resetLoom = function(e) {\n\t\t\tif (e)\t\t\te.preventDefault();\n\t\t\tif (p5Sketch)\tp5Sketch.remove();\n\n\t\t\tinitLoom();\n\t\t}\n\n\t\tvar parseArgs = function() {\n\t\t\tif (seedInput.value.length > 0)\n\t\t\t\tgenerateFromString(seedInput.value);\n\n\t\t\tlet threadWidth   = parseFloat(document.querySelector('#thread-width').value),\n\t\t\t\tthreadSpacing = parseFloat(document.querySelector('#thread-spacing').value),\n\t\t\t\tpatternWidth  = parseInt(document.querySelector('#pattern-width').value);\n\n\t\t\tlet weftColors    = [].slice.call(controls.querySelectorAll('.setting-wefts .repeater-elements input[type=\"color\"]'))\n\t\t\t\t\t\t\t\t  .map(input => input.value);\n\n\t\t\tlet warps         = [].slice.call(controls.querySelectorAll('.setting-warps .repeater-elements .repeater-single'))\n\t\t\t\t\t\t\t\t  .map(function(row) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tcolor:   row.querySelector('input[type=\"color\"]').value,\n\t\t\t\t\t\t\t\t\t\t\tpattern: row.querySelector('input[type=\"text\"]').value\n\t\t\t\t\t\t\t\t\t\t\t\t\t    .replace(/[^01]/g, '')\n\t\t\t\t\t\t\t\t\t\t\t\t\t    .split(''),\n\t\t\t\t\t\t\t\t  \t\t}\n\t\t\t\t\t\t\t\t  });\n\n\t\t\treturn {\n\t\t\t\tthreadWidth: \tthreadWidth,\n\t\t\t\tthreadSpacing:\tthreadSpacing,\n\t\t\t\tthreadTotal:    threadWidth + threadSpacing,\n\t\t\t\tpatternWidth:\tpatternWidth,\n\t\t\t\tweftColors: \tweftColors,\n\t\t\t\twarpSettings:   warps \n\t\t\t};\n\t\t}\n\n\t\tvar generateFromString = function(seed) {\n\t\t\tlet threadWidthInput   = document.querySelector('#thread-width'),\n\t\t\t\tthreadSpacingInput = document.querySelector('#thread-spacing'),\n\t\t\t\tpatternWidth       = document.querySelector('#pattern-width');\n\n\t\t\t//\tclear everything\n\t\t\tdocument.querySelector('.setting-wefts .repeater-elements').innerHTML = '';\n\t\t\tdocument.querySelector('.setting-warps .repeater-elements').innerHTML = '';\n\n\n\t\t\tlet getRandomNumber = xmur3(seed),\n\t\t\t\tnumWefts        = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tnumWarps        = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tthreadWidth     = parseInt(lerp(getRandomNumber(), 1, 50)),\n\t\t\t\tcolors          = generateRandomColorSet(getRandomNumber);\n\n\t\t\tthreadWidthInput.value   = threadWidth;\n\t\t\tthreadSpacingInput.value = parseInt(lerp(getRandomNumber(), 0, 0.5 * threadWidth));\n\t\t\tpatternWidth.value       = parseInt(lerp(getRandomNumber(), 1, 999));\n\n\t\t\tfor (let i = 0; i < numWefts; i++) {\n\t\t\t\tlet newColor = colors[parseInt(lerp(getRandomNumber(), 0, colors.length - 1))];\n\t\t\t\taddWeft(newColor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < numWarps; i++) {\n\t\t\t\tlet newColor      = colors[parseInt(lerp(getRandomNumber(), 0, colors.length - 1))],\n\t\t\t\t\tpatternLength = parseInt(lerp(getRandomNumber(), 4, 200)),\n\t\t\t\t\tnewPattern    = '';\n\n\t\t\t\tfor (let n = 0; n < patternLength; n++) {\n\t\t\t\t\tnewPattern = newPattern + (getRandomNumber() < 0.5 ? '0' : '1');\n\t\t\t\t}\n\n\t\t\t\taddWarp(newColor, newPattern);\n\t\t\t}\n\t\t}\n\n\n\n\t\t/***************************************\n\t\t\tInterface\n\t\t***************************************/\n\n\t\tvar addWeft = function(color) {\n\t\t\tlet weftsInner = controls.querySelector('.setting-wefts .repeater-elements'),\n\t\t\t\ttemplate   = controls.querySelector('.setting-wefts .repeater-template'),\n\t\t\t\tnewElem    = template.cloneNode(true),\n\t\t\t\tremoveBtn  = newElem.querySelector('.remove-btn');\n\n\t\t\tnewElem.classList.remove('repeater-template');\n\t\t\tweftsInner.appendChild(newElem);\n\t\t\tremoveBtn.addEventListener('click', removeWeft);\n\n\t\t\tif (color !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"color\"]').value = color;\n\t\t\t}\n\t\t}\n\n\t\tvar removeWeft = function(e) {\n\t\t\tlet row = e.target.closest('.repeater-single');\n\t\t\te.target.removeEventListener('click', removeWeft);\n\t\t\trow.parentElement.removeChild(row);\n\t\t}\n\n\t\tvar addWarp = function(color, pattern) {\n\t\t\tlet warpsInner = controls.querySelector('.setting-warps .repeater-elements'),\n\t\t\t\ttemplate   = controls.querySelector('.setting-warps .repeater-template'),\n\t\t\t\tnewElem    = template.cloneNode(true),\n\t\t\t\tremoveBtn  = newElem.querySelector('.remove-btn');\n\n\t\t\tnewElem.classList.remove('repeater-template');\n\t\t\twarpsInner.appendChild(newElem);\n\t\t\tremoveBtn.addEventListener('click', removeWarp);\n\n\t\t\tif (color !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"color\"]').value = color;\n\t\t\t}\n\n\t\t\tif (pattern !== null) {\n\t\t\t\tnewElem.querySelector('input[type=\"text\"]').value = pattern;\n\t\t\t}\n\t\t}\n\n\t\tvar removeWarp = function(e) {\n\t\t\tlet row = e.target.closest('.repeater-single');\n\t\t\te.target.removeEventListener('click', removeWarp);\n\t\t\trow.parentElement.removeChild(row);\n\t\t}\n\n\t\tvar saveFrame = function() {\n\t\t\tlet now      = new Date(),\n\t\t\t\tfileName = 'loom_' + now.getFullYear() + '-' + (now.getMonth() + 1) + '-' + now.getDate()\n\t\t\t\t\t\t + ' ' + now.getHours() + '-' + now.getMinutes() + '-' + now.getSeconds();\n\t\t\tp5Sketch.save(fileName + '.jpg');\n\t\t}\n\n\t\tvar toggleSettings = function() {\n\t\t\tsettings.classList.toggle('show-settings');\n\t\t}\n\n\t\tvar luckyMode = function() {\n\t\t\tvar seedLength = parseInt(lerp(Math.random(), 1, 100)),\n\t\t\t\tseedString = '',\n    \t\t\tchars      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n\t\t\tfor (var i = 0; i < seedLength; i++) {\n\t\t\t\tseedString += chars.charAt(Math.floor(Math.random() * chars.length));\n\t\t\t}\n\n\n\t\t\tseedInput.value = seedString; // hacky but I don't care, it's late\n\t\t\tresetLoom();\n\t\t}\n\n\n\n\t\t/***************************************\n\t\t\tDrawing\n\t\t***************************************/\n\n\t\tvar sketch = function(p) {\n\t\t\tlet wefts         = [],\n\t\t\t\tnumWefts,\n\t\t\t\twarps         = [];\n\n\t\t\tvar\toffsetX          = 0.5 * args.threadWidth,\n\t\t\t\tcurrentY         = 0,\n\t\t\t\tcurrentWarpIndex = 0;\n\n\t\t\tp.setup = function() {\n\t\t\t\tp.createCanvas(sketchContainer.clientWidth, sketchContainer.clientHeight);\n\t\t\t\tnumWefts = getNumWefts();\n\n\t\t\t\tfor (let x = 0; x < numWefts; x++) {\n\t\t\t\t\twefts.push(new Weft({\n\t\t\t\t\t\tx:    \t\tx * args.threadTotal + offsetX, // offset because stroke is drawn centered\n\t\t\t\t\t\tcolor:\t\targs.weftColors[x % args.weftColors.length],\n\t\t\t\t\t\tgap:        args.threadSpacing,\n\t\t\t\t\t\tstep:       args.threadTotal,\n\t\t\t\t\t\twidth:\t\targs.threadWidth\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tfor (let y = 0; y < args.warpSettings.length; y++) {\n\t\t\t\t\twarps.push(new Warp({\n\t\t\t\t\t\tcolor:  \targs.warpSettings[y].color,\n\t\t\t\t\t\tgap:        args.threadSpacing,\n\t\t\t\t\t\tstep:       args.threadTotal,\n\t\t\t\t\t\twidth:  \targs.threadWidth,\n\t\t\t\t\t\tnumWefts:   numWefts,\n\t\t\t\t\t\tpattern:\targs.warpSettings[y].pattern\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tp.background(255);\n\t\t\t}\n\n\n\t\t\t/***************************************\n\t\t\t\tDraw row by row\n\t\t\t***************************************/\n\n\t\t\tp.draw = function() {\n\t\t\t\tif (currentY * args.threadTotal > p.height)\n\t\t\t\t\treturn p.noLoop();\n\n\t\t\t\tlet currentWarp = warps[currentWarpIndex];\n\n\t\t\t\tfor (var x = 0; x < numWefts; x++) {\n\t\t\t\t\tlet underOrOver = currentWarp.weave(x, currentY);\n\t\t\t\t\tif (underOrOver == 'under')\n\t\t\t\t\t \twefts[x].weave(currentY);\n\t\t\t\t}\n\n\t\t\t\tcurrentWarpIndex = wrapIndex(currentWarpIndex + 1, 0, args.warpSettings.length - 1);\n\t\t\t\tcurrentY++;\n\t\t\t}\n\n\n\t\t\t/***************************************\n\t\t\t\tWarps: horizontal threads\n\t\t\t***************************************/\n\n\t\t\tclass Warp {\n\t\t\t\tconstructor(args) {\n\t\t\t\t\tthis.args            = args;\n\t\t\t\t\tthis.counter         = 0;\n\t\t\t\t}\n\n\t\t\t\tweave(currentX, currentY) {\n\t\t\t\t\tthis.counter = wrapIndex(this.counter + 1, 0, this.args.pattern.length - 1);\n\n\t\t\t\t//\tgo under?\n\t\t\t\t\tif (this.args.pattern[this.counter] == 0)\n\t\t\t\t\t\treturn 'under';\n\n\t\t\t\t//\tgo over!\n\t\t\t\t\tlet\tstartX =  currentX      * this.args.step - this.args.gap,\n\t\t\t\t\t\tendX   = (currentX + 1) * this.args.step,\n\t\t\t\t\t\ty      = currentY * this.args.step + 0.5 * (this.args.width);\n\n\t\t\t\t\tp.strokeCap(p.SQUARE);\n\t\t\t\t\tp.strokeWeight(this.args.width);\n\t\t\t\t\tp.stroke(this.args.color);\n\t\t\t\t\tp.line(startX, y, endX, y);\n\t\t\t\t\treturn 'over';\n\t\t\t\t}\n\t\t\t}\n\n\n\n\t\t\t/***************************************\n\t\t\t\tWefts: vertical threads\n\t\t\t***************************************/\n\n\t\t\tclass Weft {\n\t\t\t\tconstructor(args) {\n\t\t\t\t\tthis.args  = args;\n\t\t\t\t}\n\n\t\t\t\tweave(currentY) {\n\t\t\t\t\tlet startY =  currentY      * this.args.step - this.args.gap,\n\t\t\t\t\t\tendY   = (currentY + 1) * this.args.step + this.args.gap;\n\n\t\t\t\t\tp.strokeCap(p.SQUARE);\n\t\t\t\t\tp.strokeWeight(this.args.width);\n\t\t\t\t\tp.stroke(this.args.color);\n\t\t\t\t\tp.line(this.args.x, startY, this.args.x, endY);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar getNumWefts = function() {\n\t\t\t\tlet minWidth      = Math.floor(p.width / args.threadTotal),\n\t\t\t\t\tmaxWidth      = Math.ceil(minWidth / args.patternWidth) * args.patternWidth + Math.floor(0.5 * args.patternWidth);\n\t\t\t\treturn maxWidth;\n\t\t\t}\n\t\t}\n\n\t\t/***************************************\n\t\t\tHelper functions\n\t\t***************************************/\n\n\t\tvar wrapIndex = function(n, min, max) {\n\t\t\tif (n >= min && n <= max)\treturn n;\n\t\t\tif (n > max)\t\t\t\treturn min;\n\t\t\t\t\t\t\t\t\t\treturn max;\n\t\t}\n\n\t\tvar limit = function(n, min, max) {\n\t\t\treturn Math.min(Math.max(n, min), max);\n\t\t}\n\n\t\tvar lerp = function(n, min, max) {\n        \treturn min + (max - min) * limit(n, 0, 1);\n\t\t}\n\n\t\t// seeded pseudo-random number generator\n\t\tvar xmur3 = function(seed) {\n\t\t\tfor (var i = 0, h = 1779033703 ^ seed.length; i < seed.length; i++) {\n\t\t\t\th = Math.imul(h ^ seed.charCodeAt(i), 3432918353);\n\t\t\t\th = h << 13 | h >>> 19;\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\th = Math.imul(h ^ h >>> 16, 2246822507);\n\t\t\t\th = Math.imul(h ^ h >>> 13, 3266489909);\n\t\t\t\th = (h ^= h >>> 16) >>> 0;\n\t\t\t\treturn h / Math.pow(10, h.toString().length);\n\t\t\t}\n\t\t}\n\n\t\tvar generateRandomColorSet = function(PRNG) {\n\t\t\tlet hue        = parseInt(lerp(PRNG(), 0, 359)),\n\t\t\t\tschemes    = ['mono', 'contrast', 'triade', 'tetrade', 'analogic'],\n\t\t\t\tvariations = ['default', 'pastel', 'soft', 'light', 'hard', 'pale'],\n\t\t\t\tscheme     = schemes[parseInt(lerp(PRNG(), 0, schemes.length - 1))],\n\t\t\t\tvariation  = variations[parseInt(lerp(PRNG(), 0, variations.length - 1))],\n\t\t\t\tcolorSet   = new ColorScheme();\n\n\t\t\tcolorSet.from_hue(hue).scheme(scheme);\n\t\t\tif (['triade', 'tetrade', 'analogic'].indexOf(scheme) > -1)\n\t\t\t\tcolorSet.distance(lerp(PRNG(), 0.25, 0.5));\n\t\t\t\n\t\t\tlet colors = colorSet.variation(variation).colors();\n\t\t\treturn colors.map(color => '#' + color);\n\t\t}\n\n\t\tregisterEvents();\n\t\tinitLoom();\n\t}\n\n\n\n\n\n\n\t/***************************************\n\t\tCredits\n\t***************************************/\n\n\tvar credits = function() {\n\t\tvar credits = '**********\\n\\nThis website was built by Matthias Planitzer.\\nwww.matthias-planitzer.de\\n\\n**********';\n\t\tconsole.log('%c' + credits, 'color: #00F; font-family: Helvetica Neue\", Helvetica, sans-serif; font-size: 14px;');\t\n\t}\n\n\tinit();\n})();"]}